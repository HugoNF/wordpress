!function(t,n,e,i){"use strict";var o=function(){var t;return""==(t=(t=e.body||e.documentElement).style).WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""==t.transition&&""},r=!1!==o(),a=function(t,n,e){var i={},r=o();i[r+"transform"]="translateX("+n+")",i[r+"transition"]=r+"transform "+e+"s linear",t.css(i)},u="ontouchstart"in n,c=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,l=function(t){if(u)return!0;if(!c||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!=t.pointerType)return!0}else if("mouse"!=t.pointerType)return!0;return!1};t.fn.imageLightbox=function(i){i=t.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},i);var o=t([]),f=t(),s=t(),d=0,h=0,g=0,p=!1,m=function(n){return"a"==t(n).prop("tagName").toLowerCase()&&new RegExp(".("+i.allowedTypes+")$","i").test(t(n).attr("href"))},v=function(){if(!s.length)return!0;var e=t(n).width(),i=t(n).height(),o=new Image;o.src=s.attr("src"),o.onload=function(){if(d=o.width,h=o.height,d>e||h>i){var r=d/h>e/i?d/e:h/i;d/=r,h/=r}s.css({width:"auto",height:"auto","max-height":"100%","max-width":"100%",left:"0",right:"0",top:(t(n).height()-h)/2+"px","margin-left":"auto","margin-right":"auto"})}},x=function(n){if(p)return!1;if(n=void 0!==n&&("left"==n?1:-1),s.length){if(!1!==n&&(o.length<2||!0===i.quitOnEnd&&(-1===n&&0==o.index(f)||1===n&&o.index(f)==o.length-1)))return S(),!1;var e={opacity:0};r?a(s,100*n-g+"px",i.animationSpeed/1e3):e.left=parseInt(s.css("left"))+100*n+"px",s.animate(e,i.animationSpeed,function(){E()}),g=0}p=!0,!1!==i.onLoadStart&&i.onLoadStart(),setTimeout(function(){s=t("<img "+i.selector+" />").attr("src",f.attr("href")).load(function(){s.appendTo("body"),v();var e={opacity:1};if(s.css("opacity",0),r)a(s,-100*n+"px",0),setTimeout(function(){a(s,"0px",i.animationSpeed/1e3)},50);else{var u=parseInt(s.css("left"));e.left=u+"px",s.css("left",u-100*n+"px")}if(s.animate(e,i.animationSpeed,function(){p=!1,!1!==i.onLoadEnd&&i.onLoadEnd()}),i.preloadNext){var c=o.eq(o.index(f)+1);c.length||(c=o.eq(0)),t("<img />").attr("src",c.attr("href")).load()}}).error(function(){!1!==i.onLoadEnd&&i.onLoadEnd()});var e=0,u=0,d=0;s.on(c?"pointerup MSPointerUp":"click",function(n){n.preventDefault(),t(".imagelightbox-arrow, #lightbox-close").fadeToggle(300)}).on("touchstart pointerdown MSPointerDown",function(t){if(!l(t.originalEvent)||i.quitOnImgClick)return!0;r&&(d=parseInt(s.css("left"))),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(t){if(!l(t.originalEvent)||i.quitOnImgClick)return!0;t.preventDefault(),u=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,g=e-u,r?a(s,-g+"px",0):s.css("left",d-g+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){if(!l(t.originalEvent)||i.quitOnImgClick)return!0;Math.abs(g)>50?((f=o.eq(o.index(f)-(g<0?1:-1))).length||(f=o.eq(g<0?o.length:0)),x(g>0?"right":"left")):r?a(s,"0px",i.animationSpeed/1e3):s.animate({left:d+"px"},i.animationSpeed/2)})},i.animationSpeed+100)},E=function(){if(!s.length)return!1;s.remove(),s=t()},S=function(){if(!s.length)return!1;s.animate({opacity:0},i.animationSpeed,function(){E(),p=!1,!1!==i.onEnd&&i.onEnd()})};return t(n).on("resize",v),i.quitOnDocClick&&t(e).on(u?"touchend":"click",function(n){s.length&&!t(n.target).is(s)&&S()}),i.enableKeyboard&&t(e).on("keyup",function(t){if(!s.length)return!0;t.preventDefault(),27==t.keyCode&&S(),37!=t.keyCode&&39!=t.keyCode||((f=o.eq(o.index(f)-(37==t.keyCode?1:-1))).length||(f=o.eq(37==t.keyCode?o.length:0)),x(37==t.keyCode?"left":"right"))}),t(e).on("click",this.selector,function(n){return!m(this)||(n.preventDefault(),!p&&(p=!1,!1!==i.onStart&&i.onStart(),f=t(this),void x()))}),this.each(function(){if(!m(this))return!0;o=o.add(t(this))}),this.switchImageLightbox=function(t){var n=o.eq(t);if(n.length){var e=o.index(f);f=n,x(t<e?"left":"right")}return this},this.quitImageLightbox=function(){return S(),this},this.addImageLightbox=function(n){return t(n).each(function(){if(!m(this))return!0;o=o.add(t(this))}),t(e).on("click",this.selector,function(n){return!m(this)||(n.preventDefault(),!p&&(p=!1,!1!==i.onStart&&i.onStart(),f=t(this),void x()))}),this},this.removeImagesLightbox=function(){return o=t([]),this},this}}(jQuery,window,document);